var P=(m,k,f)=>new Promise((A,v)=>{var w=c=>{try{o(f.next(c))}catch(p){v(p)}},i=c=>{try{o(f.throw(c))}catch(p){v(p)}},o=c=>c.done?A(c.value):Promise.resolve(c.value).then(w,i);o((f=f.apply(m,k)).next())});import{c as re,d as _e,l as z,ae as pe,ax as b,L as Ce,r as s,o as r,e as h,g as e,w as t,u,q as E,a3 as N,Q as me,R as fe,h as _,t as L,cE as T,B as y,cF as Fe,F as V,s as $,G as x,al as ge,cG as Ee,z as ve,A as be}from"./index-db98ece3.js";import{F as O}from"./fileTypeEnum-21359a08.js";import{u as he,f as C}from"./chartEditStore-773be825.js";/* empty css                                                                   */import{l as ye}from"./components-a3cd2bb7.js";import{i as H}from"./icon-fb380718.js";import{_ as ke}from"./StylesSetting-faab7a0a.js";import"./plugin-54402248.js";import"./SettingItem-34f55708.js";import"./SettingItemBox-42414ad4.js";import"./CollapseItem-cb939767.js";const Ae="/static/png/noImage.png";const we=m=>(ve("data-v-144d0f34"),m=m(),be(),m),Be={class:"go-canvas-setting"},Se={class:"upload-box"},De=["src"],Ie={class:"upload-img"},ze=we(()=>E("img",{src:Ae},null,-1)),Le=_("背景颜色"),Te={class:"picker-height"},xe=_("应用类型"),Oe=_("背景控制"),Re=_(" 清除背景 "),Ue=_(" 清除颜色 "),Ge=_("适配方式"),Pe=_e({__name:"index",setup(m){const{ColorPaletteIcon:k}=H.ionicons5,{ScaleIcon:f,FitToScreenIcon:A,FitToHeightIcon:v,FitToWidthIcon:w}=H.carbon,i=he(),o=i.getEditCanvasConfig,c=i.getEditCanvas,p=z(),B=z(!1),S=z(0),Y=ye(()=>pe(()=>import("./index-4ff452f9.js"),["static/js/index-4ff452f9.js","static/js/index-db98ece3.js","static/css/index-324766d4.css","static/js/chartEditStore-773be825.js","static/js/plugin-54402248.js","static/js/icon-fb380718.js","static/js/components-a3cd2bb7.js","static/css/index-144061d0.css"])),M=[{label:"应用颜色",value:0},{label:"应用背景",value:1}],X=[{key:"ChartTheme",title:"主题颜色",icon:k,render:Y}],K=[{key:b.FIT,title:"自适应",icon:f,desc:"自适应比例展示，页面会有留白"},{key:b.SCROLL_Y,title:"Y轴滚动",icon:w,desc:"X轴铺满，Y轴自适应滚动"},{key:b.SCROLL_X,title:"X轴滚动",icon:v,desc:"Y轴铺满，X轴自适应滚动"},{key:b.FULL,title:"铺满",icon:A,desc:"强行拉伸画面，填充所有视图"}];Ce(()=>o.selectColor,a=>{S.value=a?0:1},{immediate:!0});const R=a=>a>50,U=()=>{i.computedScale()},q=l=>P(this,[l],function*({file:a}){p.value=[];const d=a.file.type;return a.file.size>1024*1024*T?(window.$message.warning(`图片超出 ${T}M 限制，请重新上传！`),!1):d!==O.PNG&&d!==O.JPEG&&d!==O.GIF?(window.$message.warning("文件格式不符合，请重新上传！"),!1):!0}),W=a=>{o.selectColor=a==0},j=()=>{i.setEditCanvasConfig(C.BACKGROUND_IMAGE,void 0),i.setEditCanvasConfig(C.SELECT_COLOR,!0)},J=()=>{B.value=!0,setTimeout(()=>{B.value=!1})},Q=()=>{i.setEditCanvasConfig(C.BACKGROUND,void 0),o.backgroundImage&&i.setEditCanvasConfig(C.SELECT_COLOR,!1),J()},Z=a=>{const{file:l}=a;ge(()=>{if(l.file){const d=Ee(l.file);i.setEditCanvasConfig(C.BACKGROUND_IMAGE,d),i.setEditCanvasConfig(C.SELECT_COLOR,!1)}else window.$message.error("添加图片失败，请稍后重试！")})},ee=a=>{i.setEditCanvasConfig(C.PREVIEW_SCALE_TYPE,a)};return(a,l)=>{const d=s("n-input-number"),D=s("n-form-item"),te=s("n-form"),g=s("n-text"),oe=s("n-upload-dragger"),ne=s("n-upload"),ue=s("n-color-picker"),F=s("n-space"),se=s("n-select"),I=s("n-button"),G=s("n-icon"),ae=s("n-tooltip"),le=s("n-button-group"),ie=s("n-divider"),ce=s("n-tab-pane"),de=s("n-tabs");return r(),h("div",Be,[e(te,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(D,{label:"宽度"},{default:t(()=>[e(d,{size:"small",value:u(o).width,"onUpdate:value":[l[0]||(l[0]=n=>u(o).width=n),U],disabled:u(c).lockScale,validator:R},null,8,["value","disabled"])]),_:1}),e(D,{label:"高度"},{default:t(()=>[e(d,{size:"small",value:u(o).height,"onUpdate:value":[l[1]||(l[1]=n=>u(o).height=n),U],disabled:u(c).lockScale,validator:R},null,8,["value","disabled"])]),_:1})]),_:1}),E("div",Se,[e(ne,{"file-list":p.value,"onUpdate:file-list":l[2]||(l[2]=n=>p.value=n),"show-file-list":!1,customRequest:Z,onBeforeUpload:q},{default:t(()=>[e(oe,null,{default:t(()=>[u(o).backgroundImage?(r(),h("img",{key:0,class:"upload-show",src:u(o).backgroundImage,alt:"背景"},null,8,De)):N("",!0),me(E("div",Ie,[ze,e(g,{class:"upload-desc",depth:"3"},{default:t(()=>[_(" 背景图需小于 "+L(u(T))+"M ，格式为 png/jpg/gif 的文件 ",1)]),_:1})],512),[[fe,!u(o).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),e(F,{vertical:"",size:12},{default:t(()=>[e(F,null,{default:t(()=>[e(g,null,{default:t(()=>[Le]),_:1}),E("div",Te,[B.value?N("",!0):(r(),y(ue,{key:0,size:"small",style:{width:"250px"},value:u(o).background,"onUpdate:value":l[3]||(l[3]=n=>u(o).background=n),showPreview:!0,swatches:u(Fe)},null,8,["value","swatches"]))])]),_:1}),e(F,null,{default:t(()=>[e(g,null,{default:t(()=>[xe]),_:1}),e(se,{size:"small",style:{width:"250px"},value:S.value,"onUpdate:value":[l[4]||(l[4]=n=>S.value=n),W],disabled:!u(o).backgroundImage,options:M},null,8,["value","disabled"])]),_:1}),e(F,null,{default:t(()=>[e(g,null,{default:t(()=>[Oe]),_:1}),e(I,{class:"clear-btn",size:"small",disabled:!u(o).backgroundImage,onClick:j},{default:t(()=>[Re]),_:1},8,["disabled"]),e(I,{class:"clear-btn",size:"small",disabled:!u(o).background,onClick:Q},{default:t(()=>[Ue]),_:1},8,["disabled"])]),_:1}),e(F,null,{default:t(()=>[e(g,null,{default:t(()=>[Ge]),_:1}),e(le,null,{default:t(()=>[(r(),h(V,null,$(K,n=>e(I,{key:n.key,type:u(o).previewScaleType===n.key?"primary":"tertiary",ghost:"",size:"small",onClick:Ne=>ee(n.key)},{default:t(()=>[e(ae,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(G,{class:"select-preview-icon",size:"18"},{default:t(()=>[(r(),y(x(n.icon)))]),_:2},1024)]),default:t(()=>[_(" "+L(n.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1})]),_:1}),e(u(ke),{isCanvas:!0,chartStyles:u(o)},null,8,["chartStyles"]),e(ie,{style:{margin:"10px 0"}}),e(de,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(r(),h(V,null,$(X,n=>e(ce,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(F,null,{default:t(()=>[E("span",null,L(n.title),1),e(G,{size:"16",class:"icon-position"},{default:t(()=>[(r(),y(x(n.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(r(),y(x(n.render)))]),_:2},1032,["name"])),64))]),_:1})])}}}),Ze=re(Pe,[["__scopeId","data-v-144d0f34"]]);export{Ze as default};
