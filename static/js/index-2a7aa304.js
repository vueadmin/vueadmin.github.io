var G=(O,k,m)=>new Promise((h,E)=>{var A=c=>{try{u(m.next(c))}catch(p){E(p)}},i=c=>{try{u(m.throw(c))}catch(p){E(p)}},u=c=>c.done?h(c.value):Promise.resolve(c.value).then(A,i);u((m=m.apply(O,k)).next())});import{c as de,d as _e,l as I,ae as pe,az as g,L as Ce,r as a,o as d,e as v,g as e,w as t,u as o,q as b,a3 as N,Q as me,h as _,t as L,cH as z,R as fe,E as y,cI as Fe,F as V,s as H,G as T,an as Ee,cJ as ge}from"./index-b3756aa9.js";import{F as x}from"./fileTypeEnum-21359a08.js";import{u as ve,f as C}from"./chartEditStore-e5dd533d.js";/* empty css                                                                   */import{l as be}from"./components-c9bda99b.js";import{i as $}from"./icon-db40ad22.js";import{_ as ye}from"./StylesSetting-a850a0b2.js";import"./plugin-2ed4a6ca.js";import"./SettingItem-521d43d0.js";import"./SettingItemBox-7ee3d06d.js";import"./CollapseItem-28757e2d.js";const ke={class:"go-canvas-setting"},he={class:"upload-box"},Ae=["src"],we={class:"upload-img"},Be={class:"picker-height"},De=_e({__name:"index",setup(O){const{ColorPaletteIcon:k}=$.ionicons5,{ScaleIcon:m,FitToScreenIcon:h,FitToHeightIcon:E,FitToWidthIcon:A}=$.carbon,i=ve(),u=i.getEditCanvasConfig,c=i.getEditCanvas,p=I(),w=I(!1),B=I(0),Y=be(()=>pe(()=>import("./index-a4890b12.js"),["static/js/index-a4890b12.js","static/js/index-b3756aa9.js","static/css/index-7e5579fc.css","static/js/chartEditStore-e5dd533d.js","static/js/plugin-2ed4a6ca.js","static/js/icon-db40ad22.js","static/js/components-c9bda99b.js","static/css/index-144061d0.css"])),M=[{label:"应用颜色",value:0},{label:"应用背景",value:1}],X=[{key:"ChartTheme",title:"主题颜色",icon:k,render:Y}],K=[{key:g.FIT,title:"自适应",icon:m,desc:"自适应比例展示，页面会有留白"},{key:g.SCROLL_Y,title:"Y轴滚动",icon:A,desc:"X轴铺满，Y轴自适应滚动"},{key:g.SCROLL_X,title:"X轴滚动",icon:E,desc:"Y轴铺满，X轴自适应滚动"},{key:g.FULL,title:"铺满",icon:h,desc:"强行拉伸画面，填充所有视图"}];Ce(()=>u.selectColor,l=>{B.value=l?0:1},{immediate:!0});const R=l=>l>50,U=()=>{i.computedScale()},q=s=>G(this,[s],function*({file:l}){p.value=[];const r=l.file.type;return l.file.size>1024*1024*z?(window.$message.warning(`图片超出 ${z}M 限制，请重新上传！`),!1):r!==x.PNG&&r!==x.JPEG&&r!==x.GIF?(window.$message.warning("文件格式不符合，请重新上传！"),!1):!0}),J=l=>{u.selectColor=l==0},W=()=>{i.setEditCanvasConfig(C.BACKGROUND_IMAGE,void 0),i.setEditCanvasConfig(C.SELECT_COLOR,!0)},j=()=>{w.value=!0,setTimeout(()=>{w.value=!1})},Q=()=>{i.setEditCanvasConfig(C.BACKGROUND,void 0),u.backgroundImage&&i.setEditCanvasConfig(C.SELECT_COLOR,!1),j()},Z=l=>{const{file:s}=l;Ee(()=>{if(s.file){const r=ge(s.file);i.setEditCanvasConfig(C.BACKGROUND_IMAGE,r),i.setEditCanvasConfig(C.SELECT_COLOR,!1)}else window.$message.error("添加图片失败，请稍后重试！")})},ee=l=>{i.setEditCanvasConfig(C.PREVIEW_SCALE_TYPE,l)};return(l,s)=>{const r=a("n-input-number"),D=a("n-form-item"),te=a("n-form"),F=a("n-text"),ue=a("n-upload-dragger"),ne=a("n-upload"),oe=a("n-color-picker"),f=a("n-space"),ae=a("n-select"),S=a("n-button"),P=a("n-icon"),le=a("n-tooltip"),se=a("n-button-group"),ie=a("n-divider"),ce=a("n-tab-pane"),re=a("n-tabs");return d(),v("div",ke,[e(te,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(D,{label:"宽度"},{default:t(()=>[e(r,{size:"small",value:o(u).width,"onUpdate:value":[s[0]||(s[0]=n=>o(u).width=n),U],disabled:o(c).lockScale,validator:R},null,8,["value","disabled"])]),_:1}),e(D,{label:"高度"},{default:t(()=>[e(r,{size:"small",value:o(u).height,"onUpdate:value":[s[1]||(s[1]=n=>o(u).height=n),U],disabled:o(c).lockScale,validator:R},null,8,["value","disabled"])]),_:1})]),_:1}),b("div",he,[e(ne,{"file-list":p.value,"onUpdate:fileList":s[2]||(s[2]=n=>p.value=n),"show-file-list":!1,customRequest:Z,onBeforeUpload:q},{default:t(()=>[e(ue,null,{default:t(()=>[o(u).backgroundImage?(d(),v("img",{key:0,class:"upload-show",src:o(u).backgroundImage,alt:"背景"},null,8,Ae)):N("",!0),me(b("div",we,[e(F,{class:"upload-desc",depth:"3"},{default:t(()=>[_(" 背景图需小于 "+L(o(z))+"M ，格式为 png/jpg/gif 的文件 ",1)]),_:1})],512),[[fe,!o(u).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),e(f,{vertical:"",size:12},{default:t(()=>[e(f,null,{default:t(()=>[e(F,null,{default:t(()=>[_("背景颜色")]),_:1}),b("div",Be,[w.value?N("",!0):(d(),y(oe,{key:0,size:"small",style:{width:"250px"},value:o(u).background,"onUpdate:value":s[3]||(s[3]=n=>o(u).background=n),showPreview:!0,swatches:o(Fe)},null,8,["value","swatches"]))])]),_:1}),e(f,null,{default:t(()=>[e(F,null,{default:t(()=>[_("应用类型")]),_:1}),e(ae,{size:"small",style:{width:"250px"},value:B.value,"onUpdate:value":[s[4]||(s[4]=n=>B.value=n),J],disabled:!o(u).backgroundImage,options:M},null,8,["value","disabled"])]),_:1}),e(f,null,{default:t(()=>[e(F,null,{default:t(()=>[_("背景控制")]),_:1}),e(S,{class:"clear-btn",size:"small",disabled:!o(u).backgroundImage,onClick:W},{default:t(()=>[_(" 清除背景 ")]),_:1},8,["disabled"]),e(S,{class:"clear-btn",size:"small",disabled:!o(u).background,onClick:Q},{default:t(()=>[_(" 清除颜色 ")]),_:1},8,["disabled"])]),_:1}),e(f,null,{default:t(()=>[e(F,null,{default:t(()=>[_("适配方式")]),_:1}),e(se,null,{default:t(()=>[(d(),v(V,null,H(K,n=>e(S,{key:n.key,type:o(u).previewScaleType===n.key?"primary":"tertiary",ghost:"",size:"small",onClick:Se=>ee(n.key)},{default:t(()=>[e(le,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(P,{class:"select-preview-icon",size:"18"},{default:t(()=>[(d(),y(T(n.icon)))]),_:2},1024)]),default:t(()=>[_(" "+L(n.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1})]),_:1}),e(o(ye),{isCanvas:!0,chartStyles:o(u)},null,8,["chartStyles"]),e(ie,{style:{margin:"10px 0"}}),e(re,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(d(),v(V,null,H(X,n=>e(ce,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(f,null,{default:t(()=>[b("span",null,L(n.title),1),e(P,{size:"16",class:"icon-position"},{default:t(()=>[(d(),y(T(n.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(d(),y(T(n.render)))]),_:2},1032,["name"])),64))]),_:1})])}}}),He=de(De,[["__scopeId","data-v-7e4a451d"]]);export{He as default};
