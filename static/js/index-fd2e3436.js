import{ak as n,X as o,l as M,al as v,am as D,an as L,c as U,d as A,r as h,e as B,q as k,g as d,w as O,u as c,F as N,o as V,ae as p}from"./index-12776f38.js";import{l as y}from"./components-a8eacca1.js";import{u as I,a as G}from"./chartEditStore-3ab88adb.js";import{l as K}from"./plugin-ebadb7ac.js";import{i as b}from"./icon-54d2b417.js";const{CopyIcon:j,CutIcon:z,ClipboardOutlineIcon:F,TrashIcon:W,ChevronDownIcon:X,ChevronUpIcon:Y,LockOpenOutlineIcon:$,LockClosedOutlineIcon:q,EyeOutlineIcon:J,EyeOffOutlineIcon:Q}=b.ionicons5,{UpToTopIcon:Z,DownToBottomIcon:ee,PaintBrushIcon:ne,Carbon3DSoftwareIcon:te,Carbon3DCursorIcon:oe}=b.carbon,e=I(),S=(t=3)=>({type:"divider",key:`d${t}`}),u=[{label:"锁定",key:n.LOCK,icon:o(q),fnHandle:e.setLock},{label:"解锁",key:n.UNLOCK,icon:o($),fnHandle:e.setUnLock},{label:"隐藏",key:n.HIDE,icon:o(Q),fnHandle:e.setHide},{label:"显示",key:n.SHOW,icon:o(J),fnHandle:e.setShow},{type:"divider",key:"d0"},{label:"复制",key:n.COPY,icon:o(j),fnHandle:e.setCopy},{label:"剪切",key:n.CUT,icon:o(z),fnHandle:e.setCut},{label:"粘贴",key:n.PARSE,icon:o(F),fnHandle:e.setParse},{type:"divider",key:"d1"},{label:"置顶",key:n.TOP,icon:o(Z),fnHandle:e.setTop},{label:"置底",key:n.BOTTOM,icon:o(ee),fnHandle:e.setBottom},{label:"上移",key:n.UP,icon:o(Y),fnHandle:e.setUp},{label:"下移",key:n.DOWN,icon:o(X),fnHandle:e.setDown},{type:"divider",key:"d2"},{label:"清空剪贴板",key:n.CLEAR,icon:o(ne),fnHandle:e.setRecordChart},{label:"删除",key:n.DELETE,icon:o(W),fnHandle:e.removeComponentList}],_=[{label:"创建分组",key:n.GROUP,icon:o(te),fnHandle:e.setGroup},{label:"解除分组",key:n.UN_GROUP,icon:o(oe),fnHandle:e.setUnGroup}],ae=[n.PARSE,n.CLEAR],E=(t,a)=>{if(!a)return t;const l=[];return a.forEach(r=>{l.push(...t.filter(s=>s.key===r))}),l},le=(t,a)=>a?t.filter(l=>a.findIndex(r=>r!==l.key)!==-1):t,i=M([]),se=(t,a,l,r,s)=>{t.stopPropagation(),t.preventDefault();let f=t.target;for(;f instanceof SVGElement;)f=f.parentNode;e.setTargetSelectChart(a&&a.id),e.setRightMenuShow(!1),e.getTargetChart.selectId.length>1?i.value=_:i.value=u,a||(i.value=E(v(i.value),ae)),r&&(i.value=le([..._,S(),...u],r)),s&&(i.value=E([..._,S(),...u],s)),l&&(i.value=l(D(v(i.value)),[..._,...u],a)),L().then(()=>{e.setMousePosition(t.clientX,t.clientY),e.setRightMenuShow(!0)})},ie=()=>(i.value=u,{menuOptions:i,defaultOptions:u,defaultMultiSelectOptions:_,handleContextMenu:se,onClickOutSide:()=>{e.setRightMenuShow(!1)},handleMenuSelect:l=>{e.setRightMenuShow(!1);const r=i.value.filter(s=>s.key===l);i.value.forEach(s=>{if(s.key===l){if(s.fnHandle){s.fnHandle();return}r||K()}})},mousePosition:e.getMousePosition});const re={class:"go-chart"},ce={style:{overflow:"hidden",display:"flex"}},de=A({__name:"index",setup(t){const a=G(),l=I();a.canvasInit(l.getEditCanvas);const r=y(()=>p(()=>import("./index-46a970de.js"),["static/js/index-46a970de.js","static/js/index-12776f38.js","static/css/index-7e5579fc.css","static/js/index-3439cdd3.js","static/js/icon-54d2b417.js","static/css/index-ebca6225.css","static/js/chartLayoutStore-cb5151ae.js","static/js/chartEditStore-3ab88adb.js","static/js/plugin-ebadb7ac.js","static/js/index-b47c1603.js","static/js/SettingItem-93e574ed.js","static/css/SettingItemBox-36299330.css","static/js/SettingItemBox-8ad1f53c.js","static/js/CollapseItem-b8838832.js","static/js/index.esm.min-0c1bbf27.js","static/js/http-b34b9610.js","static/js/lodash-bd53b66d.js","static/css/index-baf5e9df.css","static/js/components-a8eacca1.js","static/css/index-203fbbdd.css"])),s=y(()=>p(()=>import("./index-20455343.js").then(C=>C.i),["static/js/index-20455343.js","static/js/index-12776f38.js","static/css/index-7e5579fc.css","static/js/index-3439cdd3.js","static/js/icon-54d2b417.js","static/css/index-ebca6225.css","static/js/components-a8eacca1.js","static/js/plugin-ebadb7ac.js","static/js/index-b47c1603.js","static/js/SettingItem-93e574ed.js","static/css/SettingItemBox-36299330.css","static/js/SettingItemBox-8ad1f53c.js","static/js/CollapseItem-b8838832.js","static/js/chartEditStore-3ab88adb.js","static/js/index.esm.min-0c1bbf27.js","static/js/http-b34b9610.js","static/js/lodash-bd53b66d.js","static/css/index-baf5e9df.css","static/js/chartLayoutStore-cb5151ae.js","static/js/packagesStore-9f282dc8.js","static/css/index-8806a704.css"])),f=y(()=>p(()=>import("./index-2dc26c71.js"),["static/js/index-2dc26c71.js","static/js/index-12776f38.js","static/css/index-7e5579fc.css","static/js/components-a8eacca1.js","static/js/icon-54d2b417.js","static/js/chartLayoutStore-cb5151ae.js","static/js/chartEditStore-3ab88adb.js","static/js/plugin-ebadb7ac.js","static/css/index-b9eaa353.css"])),g=y(()=>p(()=>import("./index-9004271d.js"),["static/js/index-9004271d.js","static/js/chartLayoutStore-cb5151ae.js","static/js/index-12776f38.js","static/css/index-7e5579fc.css","static/js/chartEditStore-3ab88adb.js","static/js/plugin-ebadb7ac.js","static/js/icon-54d2b417.js"])),{menuOptions:H,onClickOutSide:w,mousePosition:m,handleMenuSelect:P}=ie();return(C,fe)=>{const x=h("n-layout-content"),T=h("n-layout"),R=h("n-dropdown");return V(),B(N,null,[k("div",re,[d(T,null,{default:O(()=>[d(x,{"content-style":"overflow:hidden; display: flex"},{default:O(()=>[k("div",ce,[d(c(s)),d(c(r))]),d(c(f))]),_:1})]),_:1})]),d(R,{placement:"bottom-start",trigger:"manual",size:"small",x:c(m).x,y:c(m).y,options:c(H),show:c(l).getRightMenuShow,"on-clickoutside":c(w),onSelect:c(P)},null,8,["x","y","options","show","on-clickoutside","onSelect"]),d(c(g))],64)}}}),ue=U(de,[["__scopeId","data-v-f2a4fce0"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{S as d,Ce as i,ie as u};
