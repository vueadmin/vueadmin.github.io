var be=Object.defineProperty,ke=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var ie=(r,_,v)=>_ in r?be(r,_,{enumerable:!0,configurable:!0,writable:!0,value:v}):r[_]=v,Z=(r,_)=>{for(var v in _||(_={}))ye.call(_,v)&&ie(r,v,_[v]);if(re)for(var v of re(_))we.call(_,v)&&ie(r,v,_[v]);return r},ee=(r,_)=>ke(r,xe(_));import{d as _e,bh as Ie,ah as $e,j as oe,l as te,J as ue,a1 as ne,a as s,o as m,c as k,b as e,w as o,n as d,F as L,q as P,a5 as se,Q as Ee,U as He,u as i,ax as J,af as D,a9 as le,e as w,ag as R,c3 as Te,c4 as Se,s as pe,x as me,c5 as Oe,c6 as De,c7 as Re,h as ve,L as de,D as V,t as ze}from"./index-20fb0306.js";import{n as Ue}from"./noData-e5cefb25.js";import{g as A}from"./plugin-2033e7b2.js";import{i as fe}from"./icon-cb727678.js";import{u as Ae,E as q}from"./chartEditStore-eb4e0443.js";import{l as Le}from"./index-e3d67d15.js";const ae=r=>(pe("data-v-04bb59e0"),r=r(),me(),r),Pe={key:0,class:"create-color-setting"},Be=w("名称:"),Me=w("底部图表仅展示 7 条数据"),je={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},Ne=w(" 删除颜色 "),Fe={class:"go-flex-items-center"},Ve=ae(()=>d("span",{class:"go-mr-4"},"添加",-1)),qe={class:"expend-color-box"},Je=w("默认扩展色："),Qe=["onClick"],Ge=ae(()=>d("div",{class:"n-color-picker-checkboard"},null,-1)),Ke=w("透明扩展色："),We=["onClick"],Xe=ae(()=>d("div",{class:"n-color-picker-checkboard"},null,-1)),Ye=_e({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(r,{emit:_}){const v=r;Ie(n=>({"3d26029e":u.color}));const{AddIcon:Q,TrashIcon:G}=fe.ionicons5,K=Le(()=>$e(()=>import("./index-78711309.js"),["./index-78711309.js","./index-20fb0306.js","../css/index-79930e9d.css","./chart-169a825c.js","./chartEditStore-eb4e0443.js","./plugin-2033e7b2.js","./icon-cb727678.js"],import.meta.url)),l=oe(),u=te({index:-1,color:""});ue(()=>{var n;return(n=v.selectColor)==null?void 0:n.id},()=>{var n;l.value=D(v.selectColor),u.index=0,u.color=(n=l.value)==null?void 0:n.color[0]},{immediate:!0,deep:!1});const T=ne(()=>C(u.color)),C=n=>{if(!n)return{default:[],fade:[]};const a=36,f=[],I=[],t=[];for(let c=0;c<a;c++)I.unshift(Oe(n,1/100*(c+1))),f.push(De(n,3.5/100*(c+1)));return f.forEach((c,b)=>{t.unshift(Re(c,1/100*(b+1)))}),{default:[...I.reverse().splice(0,parseInt(`${a/2}`)-9),...f.splice(0,parseInt(`${a/2}`))],fade:t.reverse().splice(0,27)}},p=n=>({backgroundColor:n}),g=(n,a)=>{u.color=n,u.index=a},x=(n,a)=>{n&&(u.color=n),a&&(u.index=a),R(()=>{_("updateColor",l.value)})},B=(n,a)=>{const f=a?Te(n):Se(n);l.value&&(l.value.color[u.index]=f),R(()=>{_("updateColor",l.value)})},z=()=>{var a,f,I;const n=((f=l.value)==null?void 0:f.color[((a=l.value)==null?void 0:a.color.length)-1])||"#2c2c31";(I=l.value)==null||I.color.push(n),R(()=>{_("updateColor",l.value)})},M=n=>{var a,f;(a=l.value)==null||a.color.splice(n,1),n===u.index&&x((f=l.value)==null?void 0:f.color[n-1],n-1)},W=()=>{R(()=>{_("updateColor",l.value)})};return(n,a)=>{const f=s("n-input-group-label"),I=s("n-input"),t=s("n-input-group"),c=s("n-tag"),b=s("n-space"),$=s("n-color-picker"),j=s("n-icon"),U=s("n-tooltip"),S=s("n-button"),X=s("n-scrollbar"),O=s("n-card"),N=s("n-text"),F=s("n-divider");return l.value?(m(),k("div",Pe,[e(O,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(b,{justify:"space-between"},{default:o(()=>[e(t,null,{default:o(()=>[e(f,null,{default:o(()=>[Be]),_:1}),e(I,{class:"create-color-name",value:l.value.name,"onUpdate:value":a[0]||(a[0]=y=>l.value.name=y),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:W},null,8,["value"])]),_:1}),e(c,{type:"warning"},{default:o(()=>[Me]),_:1})]),_:1}),e(X,{style:{"max-height":"132px"}},{default:o(()=>[d("div",je,[(m(!0),k(L,null,P(l.value.color,(y,h)=>(m(),k("div",{class:"color-list-item",key:h},[d("div",{class:se(["go-flex-items-center",{select:h===u.index}])},[e($,{style:{width:"95px"},value:l.value.color[h],"onUpdate:value":E=>l.value.color[h]=E,"show-preview":!0,modes:["hex"],onComplete:E=>x(E,h),"onUpdate:show":E=>g(y,h)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),Ee(d("div",null,[e(U,{trigger:"hover"},{trigger:o(()=>[e(j,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:E=>M(h)},{default:o(()=>[e(i(G))]),_:2},1032,["onClick"])]),default:o(()=>[Ne]),_:2},1024)],512),[[He,h>5]])],2)]))),128)),d("div",null,[e(S,{type:"primary",secondary:"",onClick:z},{default:o(()=>[d("div",Fe,[Ve,e(j,{size:"16"},{default:o(()=>[e(i(Q))]),_:1})])]),_:1})])])]),_:1})]),_:1}),d("div",qe,[e(O,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[Je]),_:1}),e(F,{style:{margin:"10px 0"}}),e(b,{size:[4,0],justify:"center"},{default:o(()=>[(m(!0),k(L,null,P(i(T).default,(y,h)=>(m(),k("div",{class:"color-computed-item",key:h,onClick:E=>B(y,!1)},[Ge,d("div",{style:J(p(y))},null,4)],8,Qe))),128))]),_:1})]),_:1}),e(O,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[Ke]),_:1}),e(F,{style:{margin:"10px 0"}}),e(b,{size:[4,0],justify:"center"},{default:o(()=>[(m(!0),k(L,null,P(i(T).fade,(y,h)=>(m(),k("div",{class:"color-computed-item",key:h,onClick:E=>B(y,!0)},[Xe,d("div",{style:J(p(y))},null,4)],8,We))),128))]),_:1})]),_:1})]),e(i(K),{color:i(D)(l.value.color).splice(0,7)},null,8,["color"])])):le("",!0)}}});const Ze=ve(Ye,[["__scopeId","data-v-04bb59e0"]]),he=r=>(pe("data-v-1aebdbd9"),r=r(),me(),r),eo={class:"create-content"},oo={class:"create-color-setting-box"},to={key:1,class:"no-data go-flex-center"},no=["src"],so=w("暂未选择自定义颜色"),lo={class:"color-list-box"},ao={class:"color-list"},co=he(()=>d("span",null," 创建 ",-1)),ro=he(()=>d("span",null," 应用数据 ",-1)),io=w(" 暂无自定义颜色， "),_o=w("立即创建"),uo={class:"go-flex-items-center"},po=w(" 删除自定义颜色 "),mo=w("操作完成"),vo=_e({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(r,{emit:_}){const v=r,{DuplicateOutlineIcon:Q,TrashIcon:G,ArrowDownIcon:K}=fe.ionicons5,l={id:de(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},u=Ae(),T=oe(!1);let C=te(u.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const p=oe(void 0),g=te({selectInfo:C[0]});ue(()=>v.modelShow,t=>{T.value=t,t&&C.length&&(g.selectInfo=C[0])});const x=ne(()=>{var t;return(t=g==null?void 0:g.selectInfo)==null?void 0:t.id}),B=ne(()=>u.getEditCanvasConfig.chartThemeColor),z=t=>{t.id!==x.value&&(p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,g.selectInfo=t}}):g.selectInfo=t)},M=()=>{const t=()=>{const c=ee(Z({},D(l)),{id:de()});g.selectInfo=c,C.push(c),z(c),p.value=c,a(!1)};p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,t()}}):t()},W=t=>{const c=()=>{C.splice(t,1),u.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,D(C)),R(()=>{C.length?z(C[t-1>-1?t-1:t]):g.selectInfo=void 0})};p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,c()}}):A({message:"是否删除此颜色？",onPositiveCallback:()=>{c()}})},n=t=>{p.value=t},a=(t=!0)=>{if(!p.value)return;const c=C.findIndex(b=>{var $;return b.id===(($=p.value)==null?void 0:$.id)});if(c!==-1){t&&window.$message.success("数据应用成功！");const b=D(ee(Z({},p.value),{name:p.value.name||"未定义"}));C.splice(c,1,b),p.value=void 0;const $=u.getEditCanvasConfig.chartThemeColor;u.setEditCanvasConfig(q.CHART_THEME_COLOR,"dark"),R(()=>{u.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,D(C)),u.setEditCanvasConfig(q.CHART_THEME_COLOR,$)})}else window.$message.error("数据应用失败！")},f=()=>{const t=()=>{p.value=void 0,g.selectInfo=void 0,_("update:modelShow",!1)};p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{t()}}):t()},I=t=>`linear-gradient(to right, ${t.color[0]} 0%, ${t.color[5]} 100%)`;return(t,c)=>{const b=s("n-text"),$=s("n-timeline-item"),j=s("n-timeline"),U=s("n-icon"),S=s("n-button"),X=s("n-badge"),O=s("n-space"),N=s("n-divider"),F=s("n-a"),y=s("n-ellipsis"),h=s("n-card"),E=s("n-tooltip"),Ce=s("n-modal");return m(),V(Ce,{class:"go-chart-create-color",show:T.value,"onUpdate:show":c[0]||(c[0]=H=>T.value=H),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(h,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>[]),"header-extra":o(()=>[]),action:o(()=>[e(O,{justify:"end"},{default:o(()=>[e(S,{onClick:f},{default:o(()=>[mo]),_:1})]),_:1})]),default:o(()=>[d("div",eo,[d("div",oo,[i(x)?(m(),V(i(Ze),{key:0,selectColor:g.selectInfo,onUpdateColor:n},null,8,["selectColor"])):(m(),k("div",to,[d("img",{src:i(Ue),alt:"暂无数据"},null,8,no),e(b,{depth:3},{default:o(()=>[so]),_:1})]))]),d("div",lo,[e(j,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e($,{type:"info"}),e($,{type:"success"})]),_:1}),d("div",ao,[e(O,null,{default:o(()=>[e(S,{class:se(["create-btn",{"is-full":!i(x)}]),type:"primary",ghost:!i(x),secondary:!!i(x),onClick:M},{icon:o(()=>[e(U,null,{default:o(()=>[e(i(Q))]),_:1})]),default:o(()=>[co]),_:1},8,["class","ghost","secondary"]),i(x)?(m(),V(X,{key:0,show:p.value!==void 0,dot:""},{default:o(()=>[e(S,{class:"create-btn",type:"info",secondary:"",onClick:a},{icon:o(()=>[e(U,null,{default:o(()=>[e(i(K))]),_:1})]),default:o(()=>[ro]),_:1})]),_:1},8,["show"])):le("",!0)]),_:1}),e(N,{style:{margin:"10px 0"}}),i(x)?le("",!0):(m(),V(b,{key:0,class:"not-data-text",depth:3},{default:o(()=>[io,e(F,{onClick:M},{default:o(()=>[_o]),_:1})]),_:1})),(m(!0),k(L,null,P(i(C),(H,ce)=>(m(),k("div",{class:"color-card-box",key:ce},[e(h,{class:se(["color-card",{selected:H.id===i(x)}]),size:"small",hoverable:"",embedded:"",onClick:Y=>z(H)},{default:o(()=>[d("div",uo,[e(y,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[w(ze(H.name),1)]),_:2},1024),(m(!0),k(L,null,P(H.color,(Y,ge)=>(m(),k("span",{class:"theme-color-item",key:ge,style:J({backgroundColor:Y})},null,4))),128))]),d("div",{class:"theme-bottom",style:J({backgroundImage:I(H)})},null,4)]),_:2},1032,["class","onClick"]),e(E,{trigger:"hover"},{trigger:o(()=>[e(S,{text:"",disabled:H.id===i(B),onClick:Y=>W(ce)},{default:o(()=>[e(U,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(i(G))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[po]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}});const yo=ve(vo,[["__scopeId","data-v-1aebdbd9"]]);export{yo as default};
