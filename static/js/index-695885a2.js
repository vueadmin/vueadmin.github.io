var v=(e,t,n)=>new Promise((l,o)=>{var i=c=>{try{_(n.next(c))}catch(u){o(u)}},C=c=>{try{_(n.throw(c))}catch(u){o(u)}},_=c=>c.done?l(c.value):Promise.resolve(c.value).then(i,C);_((n=n.apply(e,t)).next())});import{M as G}from"./index-3c08018c.js";import{u as R,_ as M}from"./index-8d18a59d.js";import{u as P,E as b}from"./chartEditStore-287f703e.js";import{u as N,a as S}from"./chartLayoutStore-a558e9e6.js";import{cs as U,ct as K,cu as H,cv as V,a as z,cw as Y,cx as q,cy as J,cz as Q,c as W,d as X,n as Z,l as j,a0 as tt,L as et,al as nt,r as w,o as k,e as x,q as g,F as at,s as st,g as f,u as L,w as h,h as D,t as B,ag as ot,cA as rt,aB as it}from"./index-3b318239.js";import{a as T,b as F,l as A}from"./plugin-d361016e.js";import{c as m}from"./components-39639f27.js";import{f as E,c as O,d as I}from"./index-c1004c5f.js";import"./icon-227f2529.js";import"./index-0132170c.js";import"./SettingItem-9486fcfb.js";/* empty css                                                                   */import"./SettingItemBox-679af374.js";import"./CollapseItem-63e86c9c.js";import"./index.esm.min-3ec746d7.js";import"./http-8073ebf0.js";import"./lodash-e8a3f090.js";function ct(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var lt=ct;function ut(e,t,n){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++l<o;)i[l]=e[l+t];return i}var dt=ut,ft=U,mt=dt;function _t(e,t){return t.length<2?e:ft(e,mt(t,0,-1))}var pt=_t,gt=K,ht=lt,Ct=pt,yt=H;function vt(e,t){return t=gt(t,e),e=Ct(e,t),e==null||delete e[yt(ht(t))]}var kt=vt,xt=V;function Lt(e){return xt(e)?void 0:e}var Et=Lt,Ot=z,bt=Q,St=kt,wt=K,Dt=Y,Bt=Et,Tt=q,Ft=J,At=1,It=2,Kt=4,$t=Tt(function(e,t){var n={};if(e==null)return n;var l=!1;t=Ot(t,function(i){return i=wt(i,e),l||(l=i.length>1),i}),Dt(e,Ft(e),n),l&&(n=bt(n,At|It|Kt,Bt));for(var o=t.length;o--;)St(n,t[o]);return n}),Gt=$t;const Rt={class:"go-content-charts-item-animation-patch"},Mt=["onDragstart","onDblclick","onClick"],Pt={class:"list-header"},Nt={class:"list-center go-flex-center go-transition"},Ut={class:"list-bottom"},Ht=X({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},setup(e){const t=P(),{getPackagesList:n}=R();Z(()=>{const r=t.getComponentList.map(a=>a.key);r.includes("TextGroup")||n.Informations.map(a=>{a.key==="TextGroup"&&c(a)}),r.includes("TextCommon")||n.Informations.map(a=>{a.key==="TextCommon"&&c(a)}),r.includes("Other1")||n.Other.map(a=>{a.key==="Other1"&&c(a)}),r.includes("Other2")||n.Other.map(a=>{a.key==="Other2"&&c(a)})});const l=N(),o=j(),i=tt(()=>l.getChartType),C=(s,r)=>{m(r.chartKey,E(r)),m(r.conKey,O(r)),s.dataTransfer.setData(rt.DRAG_KEY,it(Gt(r,["image"]))),t.setEditCanvas(b.IS_CREATE,!0)},_=()=>{t.setEditCanvas(b.IS_CREATE,!1)},c=s=>v(this,null,function*(){try{T();const r=["Backgrounds","Rabbits","Clothing","Informations","Other"];m(s.chartKey,E(s)),m(s.conKey,O(s));let a=yield I(s);t.addComponentList(a,!1,!0),t.setTargetSelectChart(a.id),r.includes(s.package)&&t.setLock(!0,!0),F()}catch(r){A(),window.$message.warning("图表正在研发中, 敬请期待...")}}),u=s=>v(this,null,function*(){if(!["TextGroup","TextCommon","Other1","Other2"].includes(s.key))try{T();const a=["Backgrounds","Rabbits","Clothing","Informations","Other"];m(s.chartKey,E(s)),m(s.conKey,O(s));let p=yield I(s);t.addComponentList(p,!1,!0),t.setTargetSelectChart(p.id),a.includes(s.package)&&t.setLock(!0,!0),F()}catch(a){A(),window.$message.warning("图表正在研发中, 敬请期待...")}});return et(()=>i.value,s=>{s===S.DOUBLE&&nt(()=>{o.value.classList.add("miniAnimation")})}),(s,r)=>{const a=w("n-ellipsis"),p=w("n-text");return k(),x("div",Rt,[g("div",{ref_key:"contentChartsItemBoxRef",ref:o,class:ot(["go-content-charts-item-box",[i.value===L(S).DOUBLE?"double":"single"]])},[(k(!0),x(at,null,st(e.menuOptions,(d,$)=>(k(),x("div",{class:"item-box",key:$,draggable:"",onDragstart:y=>C(y,d),onDragend:_,onDblclick:y=>u(d),onClick:y=>u(d)},[g("div",Pt,[f(L(G),{class:"list-header-control-btn",mini:!0,disabled:!0}),f(p,{class:"list-header-text",depth:"3"},{default:h(()=>[f(a,null,{default:h(()=>[D(B(d.title),1)]),_:2},1024)]),_:2},1024)]),g("div",Nt,[f(L(M),{class:"list-img",chartConfig:d},null,8,["chartConfig"])]),g("div",Ut,[f(p,{class:"list-bottom-text",depth:"3"},{default:h(()=>[f(a,{style:{"max-width":"90%"}},{default:h(()=>[D(B(d.title),1)]),_:2},1024)]),_:2},1024)])],40,Mt))),128))],2)])}}}),ce=W(Ht,[["__scopeId","data-v-3c860378"]]);export{ce as default};
