var C=(e,t,n)=>new Promise((i,s)=>{var c=u=>{try{p(n.next(u))}catch(f){s(f)}},m=u=>{try{p(n.throw(u))}catch(f){s(f)}},p=u=>u.done?i(u.value):Promise.resolve(u.value).then(c,m);p((n=n.apply(e,t)).next())});import{_ as T}from"./index-1859c825.js";import{u as w,E as L}from"./chartEditStore-a61563c8.js";import{u as A,a as E}from"./chartLayoutStore-9c757bbb.js";import{cs as I,ct as F,cu as K,cv as $,a as R,cw as G,cx as P,cy as M,cz as N,c as U,d as H,n as z,l as V,a0 as Y,L as q,an as J,o as _,e as h,q as O,F as Q,s as W,g as X,u as b,ag as Z,cA as j,aD as tt}from"./index-e3e8e34e.js";import{a as x,b as S,l as D}from"./plugin-6acf2e29.js";import{c as d}from"./components-7e2a82f6.js";import{f as k,c as y,d as B}from"./index-029db510.js";import{u as et}from"./packagesStore-e2ab9429.js";import"./index-3b240511.js";import"./icon-b5d84c93.js";import"./SettingItem-2a3edcdc.js";/* empty css                                                                   */import"./SettingItemBox-5dff6656.js";import"./CollapseItem-7dde3ac4.js";import"./index.esm.min-24caa74b.js";import"./http-a7b30693.js";import"./lodash-06953b97.js";function at(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var nt=at;function ot(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var c=Array(s);++i<s;)c[i]=e[i+t];return c}var st=ot,rt=I,ct=st;function it(e,t){return t.length<2?e:rt(e,ct(t,0,-1))}var lt=it,ut=F,ft=nt,gt=lt,dt=K;function pt(e,t){return t=ut(t,e),e=gt(e,t),e==null||delete e[dt(ft(t))]}var mt=pt,Ct=$;function _t(e){return Ct(e)?void 0:e}var ht=_t,kt=R,yt=N,vt=mt,Lt=F,Et=G,Ot=ht,bt=P,xt=M,St=1,Dt=2,Bt=4,Ft=bt(function(e,t){var n={};if(e==null)return n;var i=!1;t=kt(t,function(c){return c=Lt(c,e),i||(i=c.length>1),c}),Et(e,xt(e),n),i&&(n=yt(n,St|Dt|Bt,Ot));for(var s=t.length;s--;)vt(n,t[s]);return n}),Tt=Ft;const wt={class:"go-content-charts-item-animation-patch"},At=["onDragstart","onDblclick","onClick"],It={class:"list-center go-flex-center go-transition"},Kt=H({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},setup(e){const t=w(),{getPackagesList:n}=et();z(()=>{i()});const i=()=>{const r=t.getComponentList.map(o=>o.key);r.includes("TextGroup")||n.Informations.map(o=>{o.key==="TextGroup"&&f(o)}),r.includes("TextCommon")||n.Informations.map(o=>{o.key==="TextCommon"&&f(o)}),r.includes("Other1")||n.Other.map(o=>{o.key==="Other1"&&f(o)}),r.includes("Other2")||n.Other.map(o=>{o.key==="Other2"&&f(o)})},s=A(),c=V(),m=Y(()=>s.getChartType),p=(a,r)=>{d(r.chartKey,k(r)),d(r.conKey,y(r)),a.dataTransfer.setData(j.DRAG_KEY,tt(Tt(r,["image"]))),t.setEditCanvas(L.IS_CREATE,!0)},u=()=>{t.setEditCanvas(L.IS_CREATE,!1)},f=a=>C(this,null,function*(){try{x();const r=["Backgrounds","Rabbits","Clothing","Informations","Other"];d(a.chartKey,k(a)),d(a.conKey,y(a));let o=yield B(a);t.addComponentList(o,!1,!0),t.setTargetSelectChart(o.id),r.includes(a.package)&&t.setLock(!0,!0),S()}catch(r){D(),window.$message.warning("图表正在研发中, 敬请期待...")}}),v=a=>C(this,null,function*(){if(t.getComponentList.forEach(l=>{a.package==="Backgrounds"&&a.package===l.chartConfig.package&&t.removeComponentList(l.id,!1),a.package==="Rabbits"&&a.package===l.chartConfig.package&&t.removeComponentList(l.id,!1),a.package==="Clothing"&&a.package===l.chartConfig.package&&t.removeComponentList(l.id,!1)}),!["TextGroup","TextCommon","Other1","Other2"].includes(a.key))try{x();const l=["Backgrounds","Rabbits","Clothing","Informations","Other"];d(a.chartKey,k(a)),d(a.conKey,y(a));let g=yield B(a);t.addComponentList(g,!1,!0),t.setTargetSelectChart(g.id),l.includes(a.package)&&t.setLock(!0,!0),S()}catch(l){D(),window.$message.warning("图表正在研发中, 敬请期待...")}});return q(()=>m.value,a=>{a===E.DOUBLE&&J(()=>{c.value.classList.add("miniAnimation")})}),(a,r)=>(_(),h("div",wt,[O("div",{ref_key:"contentChartsItemBoxRef",ref:c,class:Z(["go-content-charts-item-box",[m.value===b(E).DOUBLE?"double":"single"]])},[(_(!0),h(Q,null,W(e.menuOptions,(o,l)=>(_(),h("div",{class:"item-box",key:l,draggable:"",onDragstart:g=>p(g,o),onDragend:u,onDblclick:g=>v(o),onClick:g=>v(o)},[O("div",It,[X(b(T),{class:"list-img",chartConfig:o},null,8,["chartConfig"])])],40,At))),128))],2)]))}}),te=U(Kt,[["__scopeId","data-v-68a7bd60"]]);export{te as default};
