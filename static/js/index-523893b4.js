var y=(e,t,n)=>new Promise((l,o)=>{var i=c=>{try{f(n.next(c))}catch(m){o(m)}},C=c=>{try{f(n.throw(c))}catch(m){o(m)}},f=c=>c.done?l(c.value):Promise.resolve(c.value).then(i,C);f((n=n.apply(e,t)).next())});import{M as G}from"./index-9c732c7c.js";import{u as R,_ as M}from"./index-21cedf7a.js";import{u as P,E as b}from"./chartEditStore-7bfce8d5.js";import{u as N,a as S}from"./chartLayoutStore-52717d84.js";import{cs as U,ct as K,cu as H,cv as V,a as z,cw as Y,cx as q,cy as J,cz as Q,c as W,d as X,n as Z,l as j,a0 as tt,L as et,al as nt,r as w,o as v,e as k,q as g,F as at,s as st,g as u,u as x,w as h,h as D,t as B,ag as ot,cA as rt,aB as it}from"./index-694637ab.js";import{a as T,b as F,l as A}from"./plugin-045c319a.js";import{c as d}from"./components-eb9c8b61.js";import{f as L,c as E,d as I}from"./index-831d8bed.js";import"./icon-0ec4fc1a.js";import"./index-9a522b31.js";import"./SettingItem-02b08d1d.js";/* empty css                                                                   */import"./SettingItemBox-019555c5.js";import"./CollapseItem-f6185e00.js";import"./index.esm.min-70ee7e56.js";import"./http-362d2a23.js";import"./lodash-6953d83c.js";function ct(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var lt=ct;function ut(e,t,n){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++l<o;)i[l]=e[l+t];return i}var dt=ut,ft=U,mt=dt;function _t(e,t){return t.length<2?e:ft(e,mt(t,0,-1))}var pt=_t,gt=K,ht=lt,Ct=pt,yt=H;function vt(e,t){return t=gt(t,e),e=Ct(e,t),e==null||delete e[yt(ht(t))]}var kt=vt,xt=V;function Lt(e){return xt(e)?void 0:e}var Et=Lt,Ot=z,bt=Q,St=kt,wt=K,Dt=Y,Bt=Et,Tt=q,Ft=J,At=1,It=2,Kt=4,$t=Tt(function(e,t){var n={};if(e==null)return n;var l=!1;t=Ot(t,function(i){return i=wt(i,e),l||(l=i.length>1),i}),Dt(e,Ft(e),n),l&&(n=bt(n,At|It|Kt,Bt));for(var o=t.length;o--;)St(n,t[o]);return n}),Gt=$t;const Rt={class:"go-content-charts-item-animation-patch"},Mt=["onDragstart","onDblclick"],Pt={class:"list-header"},Nt={class:"list-center go-flex-center go-transition"},Ut={class:"list-bottom"},Ht=X({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},setup(e){const t=P(),{getPackagesList:n}=R();Z(()=>{const r=t.getComponentList.map(a=>a.key);r.includes("TextGroup")||n.Informations.map(a=>{a.key==="TextGroup"&&c(a)}),r.includes("TextCommon")||n.Informations.map(a=>{a.key==="TextCommon"&&c(a)}),r.includes("Other1")||n.Other.map(a=>{a.key==="Other1"&&c(a)}),r.includes("Other2")||n.Other.map(a=>{a.key==="Other2"&&c(a)})});const l=N(),o=j(),i=tt(()=>l.getChartType),C=(s,r)=>{d(r.chartKey,L(r)),d(r.conKey,E(r)),s.dataTransfer.setData(rt.DRAG_KEY,it(Gt(r,["image"]))),t.setEditCanvas(b.IS_CREATE,!0)},f=()=>{t.setEditCanvas(b.IS_CREATE,!1)},c=s=>y(this,null,function*(){try{T();const r=["Backgrounds","Rabbits","Clothing","Informations","Other"];d(s.chartKey,L(s)),d(s.conKey,E(s));let a=yield I(s);t.addComponentList(a,!1,!0),t.setTargetSelectChart(a.id),r.includes(s.package)&&t.setLock(!0,!0),F()}catch(r){A(),window.$message.warning("图表正在研发中, 敬请期待...")}}),m=s=>y(this,null,function*(){if(!["TextGroup","TextCommon","Other1","Other2"].includes(s.key))try{T();const a=["Backgrounds","Rabbits","Clothing","Informations","Other"];d(s.chartKey,L(s)),d(s.conKey,E(s));let _=yield I(s);t.addComponentList(_,!1,!0),t.setTargetSelectChart(_.id),a.includes(s.package)&&t.setLock(!0,!0),F()}catch(a){A(),window.$message.warning("图表正在研发中, 敬请期待...")}});return et(()=>i.value,s=>{s===S.DOUBLE&&nt(()=>{o.value.classList.add("miniAnimation")})}),(s,r)=>{const a=w("n-ellipsis"),_=w("n-text");return v(),k("div",Rt,[g("div",{ref_key:"contentChartsItemBoxRef",ref:o,class:ot(["go-content-charts-item-box",[i.value===x(S).DOUBLE?"double":"single"]])},[(v(!0),k(at,null,st(e.menuOptions,(p,$)=>(v(),k("div",{class:"item-box",key:$,draggable:"",onDragstart:O=>C(O,p),onDragend:f,onDblclick:O=>m(p)},[g("div",Pt,[u(x(G),{class:"list-header-control-btn",mini:!0,disabled:!0}),u(_,{class:"list-header-text",depth:"3"},{default:h(()=>[u(a,null,{default:h(()=>[D(B(p.title),1)]),_:2},1024)]),_:2},1024)]),g("div",Nt,[u(x(M),{class:"list-img",chartConfig:p},null,8,["chartConfig"])]),g("div",Ut,[u(_,{class:"list-bottom-text",depth:"3"},{default:h(()=>[u(a,{style:{"max-width":"90%"}},{default:h(()=>[D(B(p.title),1)]),_:2},1024)]),_:2},1024)])],40,Mt))),128))],2)])}}}),ce=W(Ht,[["__scopeId","data-v-d7d1b842"]]);export{ce as default};
