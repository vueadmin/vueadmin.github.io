var v=(m,c,a)=>new Promise((_,o)=>{var i=t=>{try{r(a.next(t))}catch(s){o(s)}},e=t=>{try{r(a.throw(t))}catch(s){o(s)}},r=t=>t.done?_(t.value):Promise.resolve(t.value).then(i,e);r((a=a.apply(m,c)).next())});import{d as I,j as d,aO as h,bb as N,a1 as R,a as u,o as T,D as b,w as p,b as l,u as E,Q as x,U as y,n as k,t as B,bd as U,e as z,ag as A,R as D,ac as K,aH as M,h as O}from"./index-20fb0306.js";import{i as V}from"./icon-cb727678.js";import{u as F,P as H,E as J}from"./chartEditStore-eb4e0443.js";import{u as L}from"./project.api-bcdd5979.js";import{u as Q}from"./useSync.hook-b03903fa.js";import"./plugin-2033e7b2.js";import"./chartLayoutStore-b4f2137a.js";import"./index-63f16b81.js";import"./SettingItem-11e342fe.js";/* empty css                                                                      */import"./SettingItemBox-6e9bb9c5.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-561b5bfa.js";import"./chart-169a825c.js";const $=z(" 工作空间 - "),q={class:"title"},G=I({__name:"index",setup(m){const c=F(),{dataSyncUpdate:a}=Q(),{FishIcon:_}=V.ionicons5,o=d(!1),i=d(null),e=d(h());N(()=>{e.value=c.getProjectInfo.projectName||""});const r=R(()=>{e.value=e.value.replace(/\s/g,"");const n=e.value.length?e.value:"新项目";return M(`工作空间-${n}`),c.setEditCanvasConfig(J.PROJECT_NAME,n),n}),t=()=>{o.value=!0,A(()=>{i.value&&i.value.focus()})},s=()=>v(this,null,function*(){o.value=!1,c.setProjectInfo(H.PROJECT_NAME,e.value||"");const n=yield L({id:h(),projectName:e.value});n&&n.code===D.SUCCESS?a():K()});return(n,f)=>{const C=u("n-icon"),g=u("n-button"),w=u("n-text"),S=u("n-input"),P=u("n-space");return T(),b(P,null,{default:p(()=>[l(C,{size:"20",depth:3},{default:p(()=>[l(E(_))]),_:1}),l(w,{onClick:t},{default:p(()=>[$,x(l(g,{secondary:"",size:"tiny"},{default:p(()=>[k("span",q,B(E(r)),1)]),_:1},512),[[y,!o.value]])]),_:1}),x(l(S,{ref_key:"inputInstRef",ref:i,size:"small",type:"text",maxlength:"16","show-count":"",placeholder:"请输入项目名称",value:e.value,"onUpdate:value":f[0]||(f[0]=j=>e.value=j),valueModifiers:{trim:!0},onKeyup:U(s,["enter"]),onBlur:s},null,8,["value","onKeyup"]),[[y,o.value]])]),_:1})}}});const le=O(G,[["__scopeId","data-v-4af849d3"]]);export{le as default};
