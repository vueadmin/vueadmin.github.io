var Fe=Object.defineProperty,Ee=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var re=(c,i,v)=>i in c?Fe(c,i,{enumerable:!0,configurable:!0,writable:!0,value:v}):c[i]=v,Z=(c,i)=>{for(var v in i||(i={}))xe.call(i,v)&&re(c,v,i[v]);if(ce)for(var v of ce(i))be.call(i,v)&&re(c,v,i[v]);return c},ee=(c,i)=>Ee(c,ke(i));import{c as de,d as _e,b2 as ye,ae as Ae,l as oe,p as te,L as pe,am as H,a0 as le,cO as De,cP as we,cQ as Ie,r as n,o as p,e as F,g as e,w as o,h as x,q as r,F as z,s as L,ag as ne,Q as $e,u as b,R as Be,af as q,a3 as se,an as T,cR as He,cS as Te,z as ve,A as me,M as ie,E as V,t as Se}from"./index-484ba346.js";import{n as Oe}from"./noData-9e194391.js";import{g as R}from"./plugin-c07c38a7.js";import{i as fe}from"./icon-8351409b.js";import{u as Re,f as Q}from"./chartEditStore-47b2e0a0.js";import{l as ze}from"./components-9bfa10f7.js";const ae=c=>(ve("data-v-e343b444"),c=c(),me(),c),Le={key:0,class:"create-color-setting"},Ue={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},Pe={class:"go-flex-items-center"},Me=ae(()=>r("span",{class:"go-mr-4"},"添加",-1)),Ne={class:"expend-color-box"},je=["onClick"],Ve=ae(()=>r("div",{class:"n-color-picker-checkboard"},null,-1)),Qe=["onClick"],qe=ae(()=>r("div",{class:"n-color-picker-checkboard"},null,-1)),Ge=_e({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(c,{emit:i}){const v=c;ye(l=>({"05db3b1c":d.color}));const{AddIcon:G,TrashIcon:J}=fe.ionicons5,K=ze(()=>Ae(()=>import("./index-7f3cd0d9.js"),["static/js/index-7f3cd0d9.js","static/js/index.esm.min-7c04bc27.js","static/js/index-484ba346.js","static/css/index-7e5579fc.css","static/js/chartEditStore-47b2e0a0.js","static/js/plugin-c07c38a7.js","static/js/icon-8351409b.js"])),s=oe(),d=te({index:-1,color:""});pe(()=>{var l;return(l=v.selectColor)==null?void 0:l.id},()=>{var l;s.value=H(v.selectColor),d.index=0,d.color=(l=s.value)==null?void 0:l.color[0]},{immediate:!0,deep:!1});const I=le(()=>C(d.color)),C=l=>{if(!l)return{default:[],fade:[]};const a=36,m=[],y=[],t=[];for(let u=0;u<a;u++)y.unshift(De(l,1/100*(u+1))),m.push(we(l,3.5/100*(u+1)));return m.forEach((u,h)=>{t.unshift(Ie(u,1/100*(h+1)))}),{default:[...y.reverse().splice(0,parseInt(`${a/2}`)-9),...m.splice(0,parseInt(`${a/2}`))],fade:t.reverse().splice(0,27)}},_=l=>({backgroundColor:l}),g=(l,a)=>{d.color=l,d.index=a},E=(l,a)=>{l&&(d.color=l),a&&(d.index=a),T(()=>{i("updateColor",s.value)})},U=(l,a)=>{const m=a?He(l):Te(l);s.value&&(s.value.color[d.index]=m),T(()=>{i("updateColor",s.value)})},S=()=>{var a,m,y;const l=((m=s.value)==null?void 0:m.color[((a=s.value)==null?void 0:a.color.length)-1])||"#2c2c31";(y=s.value)==null||y.color.push(l),T(()=>{i("updateColor",s.value)})},P=l=>{var a,m;(a=s.value)==null||a.color.splice(l,1),l===d.index&&E((m=s.value)==null?void 0:m.color[l-1],l-1)},W=()=>{T(()=>{i("updateColor",s.value)})};return(l,a)=>{const m=n("n-input-group-label"),y=n("n-input"),t=n("n-input-group"),u=n("n-tag"),h=n("n-space"),A=n("n-color-picker"),M=n("n-icon"),O=n("n-tooltip"),$=n("n-button"),X=n("n-scrollbar"),B=n("n-card"),N=n("n-text"),j=n("n-divider");return s.value?(p(),F("div",Le,[e(B,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(h,{justify:"space-between"},{default:o(()=>[e(t,null,{default:o(()=>[e(m,null,{default:o(()=>[x("名称:")]),_:1}),e(y,{class:"create-color-name",value:s.value.name,"onUpdate:value":a[0]||(a[0]=k=>s.value.name=k),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:W},null,8,["value"])]),_:1}),e(u,{type:"warning"},{default:o(()=>[x("底部图表仅展示 7 条数据")]),_:1})]),_:1}),e(X,{style:{"max-height":"132px"}},{default:o(()=>[r("div",Ue,[(p(!0),F(z,null,L(s.value.color,(k,f)=>(p(),F("div",{class:"color-list-item",key:f},[r("div",{class:ne(["go-flex-items-center",{select:f===d.index}])},[e(A,{style:{width:"95px"},value:s.value.color[f],"onUpdate:value":D=>s.value.color[f]=D,"show-preview":!0,modes:["hex"],onComplete:D=>E(D,f),"onUpdate:show":D=>g(k,f)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),$e(r("div",null,[e(O,{trigger:"hover"},{trigger:o(()=>[e(M,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:D=>P(f)},{default:o(()=>[e(b(J))]),_:2},1032,["onClick"])]),default:o(()=>[x(" 删除颜色 ")]),_:2},1024)],512),[[Be,f>5]])],2)]))),128)),r("div",null,[e($,{type:"primary",secondary:"",onClick:S},{default:o(()=>[r("div",Pe,[Me,e(M,{size:"16"},{default:o(()=>[e(b(G))]),_:1})])]),_:1})])])]),_:1})]),_:1}),r("div",Ne,[e(B,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[x("默认扩展色：")]),_:1}),e(j,{style:{margin:"10px 0"}}),e(h,{size:[4,0],justify:"center"},{default:o(()=>[(p(!0),F(z,null,L(I.value.default,(k,f)=>(p(),F("div",{class:"color-computed-item",key:f,onClick:D=>U(k,!1)},[Ve,r("div",{style:q(_(k))},null,4)],8,je))),128))]),_:1})]),_:1}),e(B,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[x("透明扩展色：")]),_:1}),e(j,{style:{margin:"10px 0"}}),e(h,{size:[4,0],justify:"center"},{default:o(()=>[(p(!0),F(z,null,L(I.value.fade,(k,f)=>(p(),F("div",{class:"color-computed-item",key:f,onClick:D=>U(k,!0)},[qe,r("div",{style:q(_(k))},null,4)],8,Qe))),128))]),_:1})]),_:1})]),e(b(K),{color:b(H)(s.value.color).splice(0,7)},null,8,["color"])])):se("",!0)}}}),Je=de(Ge,[["__scopeId","data-v-e343b444"]]);const Ce=c=>(ve("data-v-07525464"),c=c(),me(),c),Ke={class:"create-content"},We={class:"create-color-setting-box"},Xe={key:1,class:"no-data go-flex-center"},Ye=["src"],Ze={class:"color-list-box"},eo={class:"color-list"},oo=Ce(()=>r("span",null," 创建 ",-1)),to=Ce(()=>r("span",null," 应用数据 ",-1)),lo={class:"go-flex-items-center"},no=_e({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(c,{emit:i}){const v=c,{DuplicateOutlineIcon:G,TrashIcon:J,ArrowDownIcon:K}=fe.ionicons5,s={id:ie(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},d=Re(),I=oe(!1);let C=te(d.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const _=oe(void 0),g=te({selectInfo:C[0]});pe(()=>v.modelShow,t=>{I.value=t,t&&C.length&&(g.selectInfo=C[0])});const E=le(()=>{var t;return(t=g==null?void 0:g.selectInfo)==null?void 0:t.id}),U=le(()=>d.getEditCanvasConfig.chartThemeColor),S=t=>{t.id!==E.value&&(_.value!==void 0?R({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{_.value=void 0,g.selectInfo=t}}):g.selectInfo=t)},P=()=>{const t=()=>{const u=ee(Z({},H(s)),{id:ie()});g.selectInfo=u,C.push(u),S(u),_.value=u,a(!1)};_.value!==void 0?R({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{_.value=void 0,t()}}):t()},W=t=>{const u=()=>{C.splice(t,1),d.setEditCanvasConfig(Q.CHART_CUSTOM_THEME_COLOR_INFO,H(C)),T(()=>{C.length?S(C[t-1>-1?t-1:t]):g.selectInfo=void 0})};_.value!==void 0?R({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{_.value=void 0,u()}}):R({message:"是否删除此颜色？",onPositiveCallback:()=>{u()}})},l=t=>{_.value=t},a=(t=!0)=>{if(!_.value)return;const u=C.findIndex(h=>{var A;return h.id===((A=_.value)==null?void 0:A.id)});if(u!==-1){t&&window.$message.success("数据应用成功！");const h=H(ee(Z({},_.value),{name:_.value.name||"未定义"}));C.splice(u,1,h),_.value=void 0;const A=d.getEditCanvasConfig.chartThemeColor;d.setEditCanvasConfig(Q.CHART_THEME_COLOR,"dark"),T(()=>{d.setEditCanvasConfig(Q.CHART_CUSTOM_THEME_COLOR_INFO,H(C)),d.setEditCanvasConfig(Q.CHART_THEME_COLOR,A)})}else window.$message.error("数据应用失败！")},m=()=>{const t=()=>{_.value=void 0,g.selectInfo=void 0,i("update:modelShow",!1)};_.value!==void 0?R({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{t()}}):t()},y=t=>`linear-gradient(to right, ${t.color[0]} 0%, ${t.color[5]} 100%)`;return(t,u)=>{const h=n("n-text"),A=n("n-timeline-item"),M=n("n-timeline"),O=n("n-icon"),$=n("n-button"),X=n("n-badge"),B=n("n-space"),N=n("n-divider"),j=n("n-a"),k=n("n-ellipsis"),f=n("n-card"),D=n("n-tooltip"),ge=n("n-modal");return p(),V(ge,{class:"go-chart-create-color",show:I.value,"onUpdate:show":u[0]||(u[0]=w=>I.value=w),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(f,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>[]),"header-extra":o(()=>[]),action:o(()=>[e(B,{justify:"end"},{default:o(()=>[e($,{onClick:m},{default:o(()=>[x("操作完成")]),_:1})]),_:1})]),default:o(()=>[r("div",Ke,[r("div",We,[E.value?(p(),V(b(Je),{key:0,selectColor:g.selectInfo,onUpdateColor:l},null,8,["selectColor"])):(p(),F("div",Xe,[r("img",{src:b(Oe),alt:"暂无数据"},null,8,Ye),e(h,{depth:3},{default:o(()=>[x("暂未选择自定义颜色")]),_:1})]))]),r("div",Ze,[e(M,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e(A,{type:"info"}),e(A,{type:"success"})]),_:1}),r("div",eo,[e(B,null,{default:o(()=>[e($,{class:ne(["create-btn",{"is-full":!E.value}]),type:"primary",ghost:!E.value,secondary:!!E.value,onClick:P},{icon:o(()=>[e(O,null,{default:o(()=>[e(b(G))]),_:1})]),default:o(()=>[oo]),_:1},8,["class","ghost","secondary"]),E.value?(p(),V(X,{key:0,show:_.value!==void 0,dot:""},{default:o(()=>[e($,{class:"create-btn",type:"info",secondary:"",onClick:a},{icon:o(()=>[e(O,null,{default:o(()=>[e(b(K))]),_:1})]),default:o(()=>[to]),_:1})]),_:1},8,["show"])):se("",!0)]),_:1}),e(N,{style:{margin:"10px 0"}}),E.value?se("",!0):(p(),V(h,{key:0,class:"not-data-text",depth:3},{default:o(()=>[x(" 暂无自定义颜色， "),e(j,{onClick:P},{default:o(()=>[x("立即创建")]),_:1})]),_:1})),(p(!0),F(z,null,L(b(C),(w,ue)=>(p(),F("div",{class:"color-card-box",key:ue},[e(f,{class:ne(["color-card",{selected:w.id===E.value}]),size:"small",hoverable:"",embedded:"",onClick:Y=>S(w)},{default:o(()=>[r("div",lo,[e(k,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[x(Se(w.name),1)]),_:2},1024),(p(!0),F(z,null,L(w.color,(Y,he)=>(p(),F("span",{class:"theme-color-item",key:he,style:q({backgroundColor:Y})},null,4))),128))]),r("div",{class:"theme-bottom",style:q({backgroundImage:y(w)})},null,4)]),_:2},1032,["class","onClick"]),e(D,{trigger:"hover"},{trigger:o(()=>[e($,{text:"",disabled:w.id===U.value,onClick:Y=>W(ue)},{default:o(()=>[e(O,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(b(J))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[x(" 删除自定义颜色 ")]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}}),po=de(no,[["__scopeId","data-v-07525464"]]);export{po as default};
